# ğŸ“ 2024.08.23 íšŒê³  ğŸ“
#### 1. ìˆ˜ì—… ë‚´ìš© ë³µìŠµì •ë¦¬

---------------------------------
----------------------------------

# Django ê¸°ë°˜ ì˜¨ë¼ì¸ ìƒì  êµ¬ì¶•
- ì´ë²ˆ ì‹œê°„ë¶€í„°ëŠ” ì˜¨ë¼ì¸ ìƒì ì„ êµ¬ì¶•í•˜ëŠ” í´ë¡ ì½”ë”©ì„ ì§„í–‰í•©ë‹ˆë‹¤.
- ì˜¤ëŠ˜ ì£¼ìš” ê¸°ëŠ¥ì€ ì œí’ˆ ì¹´íƒˆë¡œê·¸ ìƒì„± ê³¼ì •ì— ëŒ€í•´ ê³µë¶€í–ˆìŠµë‹ˆë‹¤.
 
 -----------
 
## 1. í™˜ê²½ êµ¬ì¶•í•˜ê¸°
- ê°€ìƒí™˜ê²½ ì„¤ì •
  
```
python -m venv myshop
cd myshop
.\Scripts\activate
```

## í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
- pip install -r requirements.txt ë¡œ ì„¤ì¹˜í•´ì•¼í•˜ì§€ë§Œ, ì•„ì§ì€ ë‹¤ë¥¸ ê¸°ëŠ¥ë“¤ì´ í•„ìš”ì—†ì–´ì„œ `django`, `Pillow`ë§Œ ì„¤ì¹˜í–ˆìŠµë‹ˆë‹¤.

## 2. ì˜¨ë¼ì¸ ìƒì  ê¸°ë°˜ êµ¬ì¶•
- ì œí’ˆ ì¹´íƒˆë¡œê·¸, ì‡¼í•• ì¹´íŠ¸, ì£¼ë¬¸ ê´€ë¦¬ ê¸°ëŠ¥ êµ¬í˜„

#### 2.1 ì œí’ˆ ì¹´íƒˆë¡œê·¸ ë§Œë“¤ê¸°
- ì œí’ˆ ì¹´íƒˆë¡œê·¸ëŠ” ì˜¨ë¼ì¸ ìƒì ì˜ ê¸°ëŠ¥ìœ¼ë¡œ, ì—¬ê¸°ì„œ ì œí’ˆì€ ì´ë¦„, ì„¤ëª…, ì´ë¯¸ì§€, ê°€ê²© ì‚¬ìš© ê°€ëŠ¥ì„± ë“±ì˜ ì •ë³´ë¥¼ í¬í•¨ëœë‹¤.

#### 2.1.1 ê¸°ì´ˆ ì‘ì—…
- django í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ê³ , ì œí’ˆ ì¹´íƒˆë¡œê·¸ë¥¼ ìœ„í•œ `shop`ì•±ì„ ë§Œë“¬

```
django-admin startproject myshop .
django-admin startapp shop
```

- í”„ë¡œì íŠ¸ì˜ ì„¤ì • íŒŒì¼`(config/settings.py)`ì— `shop` ì•±ì„ ë“±ë¡í•©ë‹ˆë‹¤.

```
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'shop.apps.ShopConfig',
]
```

#### 2.1.2 ì œí’ˆ ì¹´íƒˆë¡œê·¸ ëª¨ë¸ ìƒì„±
`shop/models.py` íŒŒì¼ì— `Category`ì™€ `Product` ëª¨ë¸ì„ ì •ì˜í•©ë‹ˆë‹¤.

```
from django.db import models
from django.urls import reverse

class Category(models.Model):
    name = models.CharField(max_length=200)
    slug = models.SlugField(max_length=200, unique=True)

    class Meta:
        ordering = ['name']
        indexes = [
            models.Index(fields=['name']),
        ]
        verbose_name = 'category'
        verbose_name_plural = 'categories'

    def __str__(self):
        return self.name

    def get_absolute_url(self):
        return reverse('shop:product_list_by_category', args=[self.slug])


class Product(models.Model):
    category = models.ForeignKey(Category, related_name='products', on_delete=models.CASCADE)
    name = models.CharField(max_length=200)
    slug = models.SlugField(max_length=200)
    image = models.ImageField(upload_to='products/%Y/%m/%d', blank=True)
    description = models.TextField(blank=True)
    price = models.DecimalField(max_digits=10, decimal_places=2)
    available = models.BooleanField(default=True)
    created = models.DateTimeField(auto_now_add=True)
    updated = models.DateTimeField(auto_now=True)

    class Meta:
        ordering = ['name']
        indexes = [
            models.Index(fields=['id', 'slug']),
            models.Index(fields=['name']),
            models.Index(fields=['-created']),
        ]

    def __str__(self):
        return self.name

    def get_absolute_url(self):
        return reverse('shop:product_detail', args=[self.id, self.slug])
```
- ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìƒì„±í•˜ê³  ì ìš©
  
```
python manage.py makemigrations
python manage.py migrate
```

#### 2.1.3 ê´€ë¦¬ì‚¬ì´íŠ¸(Admin)ì— ì¹´íƒˆë¡œê·¸ ëª¨ë¸ ë“±ë¡í•˜ê¸°

- `admin.py` íŒŒì¼ì—ì„œ `Category`ì™€ `Product` ëª¨ë¸ì„ ë“±ë¡í•©ë‹ˆë‹¤.
```
from django.contrib import admin
from .models import Category, Product

@admin.register(Category)
class CategoryAdmin(admin.ModelAdmin):
    list_display = ['name', 'slug']
    prepopulated_fields = {'slug': ('name',)}

@admin.register(Product)
class ProductAdmin(admin.ModelAdmin):
    list_display = ['name', 'slug', 'price', 'available', 'created', 'updated']
    list_filter = ['available', 'created', 'updated']
    list_editable = ['price', 'available']
    prepopulated_fields = {'slug': ('name',)}
```

- ê´€ë¦¬ì ê³„ì •ì„ ìƒì„±í•˜ê³  ì„œë²„ë¥¼ ì‹¤í–‰

```
python manage.py createsuperuser
python manage.py runserver
```

#### 2.1.4 ì¹´íƒˆë¡œê·¸ ë·° ë§Œë“¤ê¸°
- `shop/views.py`ì— ì œí’ˆ ëª©ë¡ê³¼ ìƒì„¸ í˜ì´ì§€ë¥¼ ìœ„í•œ ë·°ë¥¼ ì‘ì„±í•¨

```
from django.shortcuts import render, get_object_or_404
from .models import Category, Product

def product_list(request, category_slug=None):
    category = None
    categories = Category.objects.all()
    products = Product.objects.filter(available=True)
    if category_slug:
        category = get_object_or_404(Category, slug=category_slug)
        products = products.filter(category=category)

    return render(request, 'shop/product/list.html',
                  {'category': category, 'categories': categories, 'products': products})

def product_detail(request, id, slug):
    product = get_object_or_404(Product, id=id, slug=slug, available=True)

    return render(request, 'shop/product/detail.html',
                  {'product': product})
```

- URL íŒ¨í„´ì„ shop/urls.pyì— ì¶”ê°€
```
from django.urls import path
from . import views

app_name = 'shop'

urlpatterns = [
    path('', views.product_list, name='product_list'),
    path('<slug:category_slug>/', views.product_list, name='product_list_by_category'),
    path('<int:id>/<slug:slug>/', views.product_detail, name='product_detail'),
]
```

- myshop/urls.pyì— shop ì•±ì˜ URLì„ í¬í•¨ ì‹œí‚´
```
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('shop.urls', namespace='shop')),
]
```
#### 2.1.5 ì¹´íƒˆë¡œê·¸ í…œí”Œë¦¿ ìƒì„±í•˜ê¸°
- ê¸°ë³¸ í…œí”Œë¦¿(shop/templates/shop/base.html)ê³¼ ì œí’ˆ ëª©ë¡ ë° ìƒì„¸ í˜ì´ì§€ í…œí”Œë¦¿

`shop/templates/shop/base.html`
```
{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>{% block title %}My shop{% endblock %}</title>
    <link href="{% static "css/base.css" %}" rel="stylesheet">
</head>
<body>
    <div id="header">
        <a href="/" class="logo">My shop</a>
    </div>
    <div id="subheader">
        <div class="cart">
            {% with total_items=cart|length %}
                {% if total_items > 0 %}
                    Your cart:
                    <a href="{% url "cart:cart_detail" %}">
                        {{ total_items }} item{{ total_items|pluralize }},
                        ${{ cart.get_total_price }}
                    </a>
                {% elif not order %}
                    Your cart is empty.
                {% endif %}
            {% endwith %}
        </div>
    </div>
    <div id="content">
        {% block content %}
        {% endblock %}
    </div>
</body>
</html>
```

 - `shop/templates/shop/product/list.html`

```
{% extends "shop/base.html" %}
{% load static %}

{% block title %}
  {% if category %}{{ category.name }}{% else %}Products{% endif %}
{% endblock %}

{% block content %}
  <div id="sidebar">
    <h3>Categories</h3>
    <ul>
      <li {% if not category %}class="selected"{% endif %}>
        <a href="{% url "shop:product_list" %}">All</a>
      </li>
      {% for c in categories %}
        <li {% if category.slug == c.slug %}class="selected"{% endif %}>
          <a href="{{ c.get_absolute_url }}">{{ c.name }}</a>
        </li>
      {% endfor %}
    </ul>
  </div>
  <div id="main" class="product-list">
    <h1>{% if category %}{{ category.name }}{% else %}Products{% endif %}</h1>
    {% for product in products %}
      <div class="item">
        <a href="{{ product.get_absolute_url }}">
          <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static "img/no_image.png" %}{% endif %}">
        </a>
        <a href="{{ product.get_absolute_url }}">{{ product.name }}</a>
        <br>
        ${{ product.price }}
      </div>
    {% endfor %}
  </div>
{% endblock %}
```
- `shop/templates/shop/product/detail.htm`

```
{% extends "shop/base.html" %}
{% load static %}

{% block title %}
  {{ product.name }}
{% endblock %}
{% block content %}
  <div class="product-detail">
    <img src="{% if product.image %}{{ product.image.url }}{% else %}
    {% static "img/no_image.png" %}{% endif %}">
    <h1>{{ product.name }}</h1>
    <h2>
      <a href="{{ product.category.get_absolute_url }}">
        {{ product.category }}
      </a>
    </h2>
    <p class="price">${{ product.price }}</p>
    {{ product.description|linebreaks }}
  </div>
{% endblock %}
```

#### 2.1.6 ë¯¸ë””ì–´ íŒŒì¼ ì„¤ì •
- `settings.py` íŒŒì¼ì—ì„œ ë¯¸ë””ì–´ íŒŒì¼ ê´€ë ¨ ì„¤ì •ì„ ì¶”ê°€
```
MEDIA_URL = 'media/'
MEDIA_ROOT = BASE_DIR / 'media'
```

- `myshop/urls.py`ì—ì„œ ë¯¸ë””ì–´ íŒŒì¼ì˜ URL ê²½ë¡œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
```
from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('shop.urls', namespace='shop')),
]

if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

-----------------
### ì¶”ê°€ í•™ìŠµ ë‚´ìš© (íšŒê³ íŒ€ ë‚´ì—ì„œ ì§ˆë¬¸)
##### templates/shop/product/detail.html ì—ì„œ
- ê¸°ì¡´ì—ëŠ” $ë¥¼ ì´ìš©í•´ì„œ ê°€ê²© í‘œì‹œë¥¼ í•´ì¤¬ëŠ”ë°, ì›í™”ë¡œ ë°”ê¾¸ë ¤ë©´ ì›í™” ê¸°í˜¸ì™€ 1000ë‹¨ìœ„ êµ¬ë¶„ì ì¶”ê°€ í•´ì£¼ì–´ì•¼ í•œë‹¤.
```
<p class="price">â‚©{{ product.price|intcomma }}</p> 
```
- ì´ì²˜ëŸ¼ ìˆ˜ì •í•˜ê²Œ ë˜ë©´ ë‹¬ëŸ¬ë¥¼ ì›í™”ë¡œ ë°”ê¿€ ìˆ˜ ìˆë‹¤.

### ë‚´ê°€ ì›í•˜ëŠ” ìœ„ì¹˜ì— ë²„íŠ¼ ë„£ê¸°
- ë²„íŠ¼ ì›í•˜ëŠ” ìœ„ì¹˜ì— ë„£ëŠ” ì—°ìŠµì„ ê³„ì†í•´ì„œ ì§„í–‰í•´ì•¼ê² ë‹¤.

