# ğŸ“ 2024.08.21 íšŒê³  ğŸ“
#### 1. ìˆ˜ì—… ë‚´ìš© ë³µìŠµì •ë¦¬

# Pystagram í”„ë¡œì íŠ¸ - ì˜¤ëŠ˜ì˜ ê¸°ëŠ¥ ì¶”ê°€ ë¶€ë¶„
##### Djangoì˜ Model, Form, View, Template ë“±ì„ í™œìš©í•˜ì—¬ ëŒ“ê¸€ ì‘ì„±, ê¸€ ì‘ì„±, í•´ì‹œíƒœê·¸ ê²€ìƒ‰ ê¸°ëŠ¥ì„ êµ¬í˜„í•œ ë¶€ë¶„ì˜ í•µì‹¬ ë‚´ìš©ë“¤ì„ ìš”ì•½í•¨

# 1. ëŒ“ê¸€ ì‘ì„± ê¸°ëŠ¥
- ëŒ“ê¸€ ì‘ì„± í¼ ìƒì„±: CommentFormì„ í†µí•´ ëŒ“ê¸€ ì‘ì„± í¼ì„ ìƒì„±í•˜ê³ , ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•œ í›„ ëŒ“ê¸€ì„ ì €ì¥í•¨

```
from posts.forms import CommentForm
from posts.models import Post
from users.models import User

data = {"content": "SampleContent", "user": user, "post": post}
form = CommentForm(data=data)
if form.is_valid():
    comment = form.save()
```
- ë·°ì—ì„œ í¼ í…œí”Œë¦¿ì— ì „ë‹¬: feeds ë·°ì—ì„œ CommentFormì„ í…œí”Œë¦¿ìœ¼ë¡œ ì „ë‹¬í•˜ì—¬ ëŒ“ê¸€ ì‘ì„± ê¸°ëŠ¥ì„ êµ¬í˜„

```
def feeds(request):
    posts = Post.objects.all()
    comment_form = CommentForm()
    context = {"posts": posts, "comment_form": comment_form}
    return render(request, "posts/feeds.html", context)
```
- í…œí”Œë¦¿ì—ì„œ í¼ ë Œë”ë§: ëŒ“ê¸€ ì‘ì„± í¼ì„ í…œí”Œë¦¿ì— í‘œì‹œí•˜ê³ , ì‚¬ìš©ìê°€ ì‘ì„±í•œ ëŒ“ê¸€ì„ ì„œë²„ë¡œ POST ìš”ì²­ìœ¼ë¡œ ì „ì†¡

```
<div class="post-comments-create">
    <form method="POST" action="{% url 'posts:comment_add' %}">
        {% csrf_token %}
        <input type="hidden" name="post" value="{{ post.id }}">
        {{ comment_form.content }}
        <button type="submit">ê²Œì‹œ</button>
    </form>
</div>
```
- ëŒ“ê¸€ ì €ì¥ ì²˜ë¦¬: comment_add ë·°ì—ì„œ POST ìš”ì²­ì„ ë°›ì•„ ëŒ“ê¸€ì„ ì €ì¥í•˜ê³ , ëŒ“ê¸€ì´ ë‹¬ë¦° ê²Œì‹œë¬¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

```
@require_POST
def comment_add(request):
    form = CommentForm(request.POST)
    if form.is_valid():
        comment = form.save(commit=False)
        comment.user = request.user
        comment.save()
        return HttpResponseRedirect(f"/posts/feeds/#post-{comment.post.id}")

```
# 2. ê¸€ ì‘ì„± ê¸°ëŠ¥
- ê¸€ ì‘ì„± í¼ ìƒì„±: PostFormì„ í†µí•´ ê¸€ ì‘ì„± í¼ì„ ìƒì„±í•˜ê³ , ìœ íš¨ì„± ê²€ì‚¬ë¥¼ ìˆ˜í–‰í•œ í›„ ê¸€ì„ ì €ì¥

```
from posts.forms import PostForm
from posts.models import PostImage

def post_add(request):
    if request.method == "POST":
        form = PostForm(request.POST)
        if form.is_valid():
            post = form.save(commit=False)
            post.user = request.user
            post.save()

            for image_file in request.FILES.getlist("images"):
                PostImage.objects.create(post=post, photo=image_file)

            return HttpResponseRedirect(f"/posts/feeds/#post-{post.id}")
    else:
        form = PostForm()
    return render(request, "posts/post_add.html", {"form": form})
```
- í…œí”Œë¦¿ì—ì„œ í¼ ë Œë”ë§: ê¸€ ì‘ì„± í¼ê³¼ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•  ìˆ˜ ìˆëŠ” inputì„ í…œí”Œë¦¿ì— í‘œì‹œí•¨

```
<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">ê²Œì‹œ</button>
</form>
```
# 3. í•´ì‹œíƒœê·¸ ê²€ìƒ‰ ê¸°ëŠ¥
- í•´ì‹œíƒœê·¸ ëª¨ë¸: HashTag ëª¨ë¸ì„ ìƒì„±í•˜ê³ , Post ëª¨ë¸ê³¼ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¡œ ì—°ê²°

```
class HashTag(models.Model):
    name = models.CharField(max_length=50)

class Post(models.Model):
    tags = models.ManyToManyField(HashTag, blank=True)
```
- í•´ì‹œíƒœê·¸ ê²€ìƒ‰ ë·° êµ¬í˜„: í•´ì‹œíƒœê·¸ë¡œ í•„í„°ë§ëœ ê²Œì‹œë¬¼ì„ ë°˜í™˜í•˜ëŠ” tags ë·°ë¥¼ êµ¬í˜„

```
def tags(request, tag_name):
    tag = HashTag.objects.get(name=tag_name)
    posts = Post.objects.filter(tags=tag)
    return render(request, "posts/tags.html", {"tag_name": tag_name, "posts": posts})
```
- í…œí”Œë¦¿ì—ì„œ í•´ì‹œíƒœê·¸ í‘œì‹œ: ê° ê²Œì‹œë¬¼ì— í¬í•¨ëœ í•´ì‹œíƒœê·¸ë¥¼ í…œí”Œë¦¿ì— í‘œì‹œí•˜ê³ , í•´ì‹œíƒœê·¸ ê²€ìƒ‰ í˜ì´ì§€ë¡œ ë§í¬ë¥¼ ì—°ê²°

```
<div class="post-tags">
    {% for tag in post.tags.all %}
        <a href="{% url 'posts:tags' tag_name=tag.name %}">#{{ tag.name }}</a>
    {% endfor %}
</div>
```
- http://127.0.0.1:8000/admin/
- adminí˜ì´ì§€
![image](https://github.com/user-attachments/assets/bba3fe22-03dd-4c61-b995-23d3fd2f0021)

- http://127.0.0.1:8000/posts/feeds/
- feed í™”ë©´ êµ¬í˜„( ì•„ì´ë””ë³„ë¡œ ëŒ“ê¸€ ì¶”ê°€ ë° ì‚­ì œ ê¸°ëŠ¥, <ë³¸ì¸ì•„ì´ë””ë§Œ ì‚­ì œê°€ëŠ¥>
![image](https://github.com/user-attachments/assets/0902d188-1538-47ea-84c6-5d3ab45f86bd)

- http://127.0.0.1:8000/posts/post_add/
- í¬ìŠ¤íŠ¸ ì¶”ê°€ê¸°ëŠ¥(í•´ì‹œíƒœê·¸ ì‰¼í‘œë¡œ ì¶”ê°€í•˜ë„ë¡ êµ¬í˜„)
![image](https://github.com/user-attachments/assets/1494dc4a-b618-4338-97cf-8379879248fc)

- http://127.0.0.1:8000/posts/tags/%EB%B0%B1%EC%97%94%EB%93%9C/
- Hashtags ë¥¼ í†µí•´ì„œ ê²€ìƒ‰ ê¸°ëŠ¥
![image](https://github.com/user-attachments/assets/7f3bcee6-84c5-4e7f-a4c8-dad23f2bc8f4)

